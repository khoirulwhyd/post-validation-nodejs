<!DOCTYPE html>
<html>

<head>
  <title>POST VALIDATION</title>
</head>

<body>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
    integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk"
    crossorigin="anonymous"></script>
  <h1>Post Validation</h1>
  <div id="error"></div>


  <form id="form" action="/listKomentar" method="post">
    <fieldset>
      <legend>Form</legend>
      <label for="nama">Nama:</label><br/>
      <input id="name" type="text" name="nama" /><br /><br />
      <label for="komentar">Komentar:</label><br/>
      <input id="coment" type="text" name="komentar" /><br /><br />
      <error id="alert-caps"></error>
      <input type="submit" value="submit" />
    </fieldset>
  </form>

  <!-- <script type="text/javascript">
      function kataValidation(){
        var uservalue = document.getElementById('coment').value;
        if(uservalue.replace(/\s/g, "").length <= 0) {
          alert("tidak boleh ada spasi ketika form masih kosong");
          return false;s
        }
      }
      function tValidation(){
        var uservalue = document.getElementById('coment').value;
        const sKata = uservalue.split(" ");
        const tdKata = ["cok", "asu", "babi", "jancok"];
        var full = document.getElementById(sKata).value = tdKata.includes("cok");

        if(full == true){
          alert("tidak boleh ada spasi ketika form masih kosong");
        }
      }
    </script> -->
  <script type="text/javascript">
    const name = document.getElementById('name')
    const coment = document.getElementById('coment')
    const form = document.getElementById('form')
    const errorElement = document.getElementById('error')



    form.addEventListener('sumbit', (e) => {
      let messages = []
      var uservalue = document.getElementById("coment").value;
      var sKata = uservalue.split(" ");
      let ktp = ["cok", "asu", "babi", "jancok"];
      ada = true;
      tidak = false;
      
      for(let a=0; a<uservalue.length; a++) { // by input
        for(let b=0; b<ktp.length; b++) { // by kata tidak pantas
          if(uservalue[a] == ktp[b]) {
            console.log(ada)
            console.log(inp)
            messages.push("form mengandung kata yang tidak pantas")
          } else {
            console.log(tidak)
            console.log(inp)
          }
          return ada;
        }
      }
      if (messages.length > 0) {
        e.preventDefault()
        errorElement.innerText = messages.join(', ')
      }
    })



    form.addEventListener('submit', (e) => { 
      let messages = []
      if (name.value === '' || name.value == null) {
        messages.push("name is required")
      }
      if (messages.length > 0) {
        e.preventDefault()
        errorElement.innerText = messages.join(', ')
      }
    })

    form.addEventListener('submit', (e) => {
      var uservalue = document.getElementById('coment').value;
      let messages = []
      if(uservalue.replace(/\s/g, "").length <= 0) {
        messages.push("tidak boleh ada spasi ketika form masih kosong")
      }
      if(messages.length > 0){
        e.preventDefault()
        errorElement.innerText = messages.join(', ')
      }
    })

    // form.addEventListener('submit', (e) => {
    //   let messages = []
    //   var uservalue = document.getElementById('coment').value;
    //   var sKata = uservalue.split(" ");
    //   const tdKata = ["cok", "asu", "babi", "jancok"];
    //   var hasil = document.getElementById('coment').sKata = tdKata.includes("asu");
    //   if(hasil === true ) {
    //     messages.push("form mengandung kata yang tidak pantas")
    //     console.log(hasil)
    //     console.log(sKata)
    //   }
    //   if(messages.length > 0){
    //     e.preventDefault()
    //     errorElement.innerText = messages.join(', ')
    //   }
    // })
    


  </script>
</body>
</html>